<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ProgressIndicator?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.control.SplitPane?>
<?import javafx.scene.control.Tab?>
<?import javafx.scene.control.TabPane?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextArea?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.control.TreeView?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.web.WebView?>
<?import javafx.scene.text.Font?>
<?import javafx.scene.control.CheckBox?>
<?import javafx.scene.control.ListView?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.ProgressIndicator?>

<BorderPane
    maxHeight="-Infinity" maxWidth="-Infinity"
    minHeight="-Infinity" minWidth="-Infinity"
    prefHeight="860.0" prefWidth="1300.0"
    style="-fx-background-color: #f0f4ff;"
    xmlns="http://javafx.com/javafx/21"
    xmlns:fx="http://javafx.com/fxml/1"
    fx:controller="com.scholar.controller.DashboardController">

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         TOP NAV BAR
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <top>
        <HBox
            alignment="CENTER_LEFT" spacing="18.0"
            style="
                -fx-background-color: linear-gradient(to right, #1a1a2e, #16213e, #0f3460);
                -fx-padding: 14 28;
                -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.35), 12, 0, 0, 4);
            ">

            <!-- Logo -->
            <VBox alignment="CENTER_LEFT" spacing="1">
                <Label text="ScholarGrid" textFill="#ffffff">
                    <font><Font name="System Bold" size="22.0"/></font>
                </Label>
                <Label text="Your Intelligent Study Hub" textFill="#7c83fd" style="-fx-font-size: 10px; -fx-letter-spacing: 0.5px;"/>
            </VBox>

            <Separator orientation="VERTICAL" style="-fx-opacity: 0.25; -fx-padding: 0 5;"/>

            <!-- Workspace badge -->
            <HBox alignment="CENTER" spacing="8"
                style="
                    -fx-background-color: rgba(124,131,253,0.15);
                    -fx-border-color: rgba(124,131,253,0.4);
                    -fx-border-radius: 20;
                    -fx-background-radius: 20;
                    -fx-padding: 5 14;
                ">
                <Label text="ðŸ›" style="-fx-font-size: 14px;"/>
                <VBox alignment="CENTER_LEFT" spacing="1">
                    <Label text="WORKSPACE" textFill="#7c83fd" style="-fx-font-size: 9px; -fx-font-weight: bold;"/>
                    <Label fx:id="channelNameLabel" text="Loading..." textFill="#fbbf24">
                        <font><Font name="System Bold" size="13.0"/></font>
                    </Label>
                </VBox>
            </HBox>

            <Region HBox.hgrow="ALWAYS"/>

            <!-- Nav pill buttons -->
            <HBox spacing="8" alignment="CENTER">
                <Button text="ðŸ¤– AI Tutor"
                    fx:id="aiTutorBtn"
                    style="
                        -fx-background-color: linear-gradient(to right, #7c83fd, #56ccf2);
                        -fx-text-fill: white; -fx-font-weight: bold;
                        -fx-background-radius: 20; -fx-padding: 7 18;
                        -fx-cursor: hand; -fx-font-size: 12px;
                        -fx-effect: dropshadow(three-pass-box, rgba(124,131,253,0.5), 8, 0, 0, 3);
                    "/>
                <Button text="Logout ðŸšª"
                    style="
                        -fx-background-color: transparent;
                        -fx-text-fill: #94a3b8;
                        -fx-border-color: rgba(148,163,184,0.4);
                        -fx-border-radius: 20; -fx-background-radius: 20;
                        -fx-padding: 7 18; -fx-cursor: hand; -fx-font-size: 12px;
                    "/>
            </HBox>
        </HBox>
    </top>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         MAIN CONTENT
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <center>
        <TabPane
            style="
                -fx-background-color: transparent;
                -fx-tab-min-height: 42px;
                -fx-tab-max-height: 42px;
            "
            tabClosingPolicy="UNAVAILABLE">

            <!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
                 TAB 1 â€” DASHBOARD (AI Input lives here only)
            â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
            <Tab text="ðŸ  Dashboard" style="-fx-font-weight: bold;">
                <SplitPane dividerPositions="0.28"
                    style="-fx-background-color: transparent; -fx-padding: 12;">

                    <!-- LEFT: AI Input Panel -->
                    <VBox spacing="16"
                        style="
                            -fx-background-color: linear-gradient(to bottom, #1a1a2e, #16213e);
                            -fx-background-radius: 16;
                            -fx-effect: dropshadow(gaussian, rgba(124,131,253,0.25), 20, 0, 0, 6);
                            -fx-padding: 24;
                        ">

                        <!-- Header -->
                        <VBox spacing="4">
                            <Label text="âœ¨ AI Scheduler" textFill="#7c83fd">
                                <font><Font name="System Bold" size="20.0"/></font>
                            </Label>
                            <Label text="Describe your study goals â€” AI does the rest"
                                textFill="#64748b" style="-fx-font-size: 12px;"/>
                        </VBox>

                        <!-- Prompt chips -->
                        <HBox spacing="6" style="-fx-padding: 4 0 0 0;">
                            <Button text="ðŸ“š Exam prep"
                                style="
                                    -fx-background-color: rgba(124,131,253,0.15);
                                    -fx-text-fill: #7c83fd; -fx-border-color: rgba(124,131,253,0.3);
                                    -fx-border-radius: 12; -fx-background-radius: 12;
                                    -fx-padding: 4 10; -fx-cursor: hand; -fx-font-size: 11px;
                                "/>
                            <Button text="â° Daily plan"
                                style="
                                    -fx-background-color: rgba(86,204,242,0.15);
                                    -fx-text-fill: #56ccf2; -fx-border-color: rgba(86,204,242,0.3);
                                    -fx-border-radius: 12; -fx-background-radius: 12;
                                    -fx-padding: 4 10; -fx-cursor: hand; -fx-font-size: 11px;
                                "/>
                            <Button text="ðŸŽ¯ Sprint"
                                style="
                                    -fx-background-color: rgba(16,185,129,0.15);
                                    -fx-text-fill: #10b981; -fx-border-color: rgba(16,185,129,0.3);
                                    -fx-border-radius: 12; -fx-background-radius: 12;
                                    -fx-padding: 4 10; -fx-cursor: hand; -fx-font-size: 11px;
                                "/>
                        </HBox>

                        <!-- Text input -->
                        <TextArea
                            fx:id="inputArea"
                            promptText="Example: I have a Calculus midterm on Friday covering Integrals. Make a 3-day plan..."
                            wrapText="true"
                            VBox.vgrow="ALWAYS"
                            style="
                                -fx-control-inner-background: #0f172a;
                                -fx-text-fill: #e2e8f0;
                                -fx-prompt-text-fill: #475569;
                                -fx-background-radius: 12;
                                -fx-border-color: rgba(124,131,253,0.25);
                                -fx-border-radius: 12;
                                -fx-font-size: 13px;
                                -fx-padding: 14;
                            "/>

                        <!-- Generate button -->
                        <Button
                            fx:id="generateBtn"
                            maxWidth="1.7976931348623157E308"
                            onAction="#onGenerateClick"
                            text="âš¡ Generate My Schedule"
                            style="
                                -fx-background-color: linear-gradient(to right, #7c83fd, #56ccf2);
                                -fx-text-fill: white; -fx-cursor: hand;
                                -fx-background-radius: 12; -fx-font-weight: bold;
                                -fx-font-size: 14px;
                                -fx-effect: dropshadow(gaussian, rgba(124,131,253,0.6), 14, 0, 0, 5);
                            ">
                            <padding><Insets bottom="13.0" top="13.0"/></padding>
                        </Button>

                        <!-- Add task manually -->
                        <Button
                            maxWidth="1.7976931348623157E308"
                            onAction="#showManualTaskEntryDialog"
                            text="âž• Add Task Manually"
                            style="
                                -fx-background-color: rgba(255,255,255,0.05);
                                -fx-text-fill: #94a3b8;
                                -fx-border-color: rgba(255,255,255,0.1);
                                -fx-border-radius: 12; -fx-background-radius: 12;
                                -fx-cursor: hand; -fx-font-size: 12px;
                            ">
                            <padding><Insets bottom="9.0" top="9.0"/></padding>
                        </Button>
                    </VBox>

                    <!-- RIGHT: Dashboard Content -->
                    <ScrollPane fitToWidth="true"
                        style="
                            -fx-background-color: transparent;
                            -fx-control-inner-background: transparent;
                            -fx-border-color: transparent;
                        ">
                        <content>
                            <VBox spacing="18" style="-fx-padding: 4 4 20 4;">

                                <!-- Class routine + announcements -->
                                <HBox spacing="16">

                                    <!-- Routine card -->
                                    <VBox HBox.hgrow="ALWAYS"
                                        style="
                                            -fx-background-color: white;
                                            -fx-background-radius: 16;
                                            -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.07), 18, 0, 0, 6);
                                            -fx-padding: 20;
                                            -fx-border-color: #e8eeff;
                                            -fx-border-radius: 16;
                                        ">
                                        <HBox alignment="CENTER_LEFT" spacing="10">
                                            <Label text="ðŸ“…" style="-fx-font-size: 20px;"/>
                                            <Label text="Class Routine" textFill="#1e293b">
                                                <font><Font name="System Bold" size="17.0"/></font>
                                            </Label>
                                            <Region HBox.hgrow="ALWAYS"/>
                                            <Button fx:id="editRoutineBtn" text="âœ Edit"
                                                style="
                                                    -fx-background-color: #fef3c7;
                                                    -fx-text-fill: #d97706;
                                                    -fx-border-color: #fde68a;
                                                    -fx-border-radius: 8; -fx-background-radius: 8;
                                                    -fx-cursor: hand; -fx-font-weight: bold;
                                                    -fx-padding: 5 12;
                                                "/>
                                        </HBox>
                                        <Separator style="-fx-opacity: 0.3; -fx-padding: 10 0 14 0;"/>
                                        <GridPane fx:id="routineGrid" hgap="20" vgap="10"
                                            style="-fx-font-size: 13px; -fx-text-fill: #334155;"/>
                                    </VBox>

                                    <!-- Announcements card -->
                                    <VBox prefWidth="310"
                                        style="
                                            -fx-background-color: linear-gradient(to bottom right, #fff0f6, #fff);
                                            -fx-background-radius: 16;
                                            -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.07), 18, 0, 0, 6);
                                            -fx-padding: 20;
                                            -fx-border-color: #ffd6e0;
                                            -fx-border-radius: 16;
                                        ">
                                        <HBox alignment="CENTER_LEFT" spacing="8">
                                            <Label text="ðŸ“¢" style="-fx-font-size: 18px;"/>
                                            <Label text="Notices" textFill="#be185d">
                                                <font><Font name="System Bold" size="16.0"/></font>
                                            </Label>
                                            <Region HBox.hgrow="ALWAYS"/>
                                            <Button fx:id="postAnnouncementBtn" text="ï¼‹"
                                                style="
                                                    -fx-background-color: #be185d;
                                                    -fx-text-fill: white;
                                                    -fx-background-radius: 50;
                                                    -fx-font-weight: bold; -fx-cursor: hand;
                                                    -fx-min-width: 28; -fx-min-height: 28;
                                                    -fx-max-width: 28; -fx-max-height: 28;
                                                "/>
                                        </HBox>
                                        <Separator style="-fx-opacity: 0.3; -fx-padding: 8 0 12 0;"/>
                                        <ScrollPane fitToWidth="true"
                                            style="-fx-background-color: transparent; -fx-border-color: transparent;"
                                            VBox.vgrow="ALWAYS">
                                            <content>
                                                <VBox fx:id="announcementList" spacing="10"
                                                    style="-fx-background-color: transparent;"/>
                                            </content>
                                        </ScrollPane>
                                    </VBox>
                                </HBox>

                                <!-- Timeline section header -->
                                <HBox alignment="CENTER_LEFT" spacing="12"
                                    style="
                                        -fx-background-color: white;
                                        -fx-background-radius: 14;
                                        -fx-padding: 14 20;
                                        -fx-border-color: #e8eeff;
                                        -fx-border-radius: 14;
                                        -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.05), 10, 0, 0, 3);
                                    ">
                                    <Label text="ðŸ—“ My Timeline" textFill="#1e293b">
                                        <font><Font name="System Bold" size="15.0"/></font>
                                    </Label>
                                    <Region HBox.hgrow="ALWAYS"/>
                                    <!-- View mode pills -->
                                    <HBox spacing="6">
                                        <Button fx:id="btnDailyTasks" text="ðŸ“‹ Today"
                                            style="
                                                -fx-background-color: #eef2ff;
                                                -fx-text-fill: #4f46e5;
                                                -fx-border-color: #c7d2fe;
                                                -fx-border-radius: 20; -fx-background-radius: 20;
                                                -fx-cursor: hand; -fx-font-weight: bold;
                                                -fx-padding: 6 16; -fx-font-size: 12px;
                                            "/>
                                        <Button fx:id="btnBacklog" text="ðŸ”´ Backlog"
                                            style="
                                                -fx-background-color: #fff1f2;
                                                -fx-text-fill: #e11d48;
                                                -fx-border-color: #fecdd3;
                                                -fx-border-radius: 20; -fx-background-radius: 20;
                                                -fx-cursor: hand; -fx-font-weight: bold;
                                                -fx-padding: 6 16; -fx-font-size: 12px;
                                            "/>
                                        <Button fx:id="btnCompleted" text="âœ… Done"
                                            style="
                                                -fx-background-color: #f0fdf4;
                                                -fx-text-fill: #16a34a;
                                                -fx-border-color: #bbf7d0;
                                                -fx-border-radius: 20; -fx-background-radius: 20;
                                                -fx-cursor: hand; -fx-font-weight: bold;
                                                -fx-padding: 6 16; -fx-font-size: 12px;
                                            "/>
                                    </HBox>
                                </HBox>

                                <!-- Timeline cards container -->
                                <VBox fx:id="timelineContainer" spacing="10"
                                    style="
                                        -fx-background-color: white;
                                        -fx-background-radius: 16;
                                        -fx-padding: 20;
                                        -fx-border-color: #e8eeff;
                                        -fx-border-radius: 16;
                                        -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.06), 16, 0, 0, 5);
                                    ">
                                    <Label text="ðŸ“Œ Your tasks for today will appear here"
                                        textFill="#94a3b8" style="-fx-font-size: 13px;"/>
                                </VBox>

                            </VBox>
                        </content>
                    </ScrollPane>
                </SplitPane>
            </Tab>

            <!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
                 TAB 2 â€” CALENDAR
            â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
            <Tab text="ðŸ“… Calendar" style="-fx-font-weight: bold;">
                <VBox spacing="16"
                    style="
                        -fx-padding: 24;
                        -fx-background-color: white;
                        -fx-background-radius: 0;
                    ">
                    <HBox alignment="CENTER_LEFT" spacing="15">
                        <Label text="ðŸ“…" style="-fx-font-size: 28px;"/>
                        <Label fx:id="monthLabel" text="February 2026" textFill="#1e293b">
                            <font><Font name="System Bold" size="26.0"/></font>
                        </Label>
                    </HBox>
                    <Separator style="-fx-opacity: 0.2;"/>
                    <GridPane fx:id="calendarGrid" hgap="10" vgap="10" VBox.vgrow="ALWAYS"
                        style="-fx-background-color: transparent;"/>
                </VBox>
            </Tab>

            <!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
                 TAB 3 â€” RESOURCES
            â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
            <Tab text="ðŸ“š Resources" style="-fx-font-weight: bold;">
                <SplitPane dividerPositions="0.35"
                    style="-fx-background-color: #f0f4ff; -fx-padding: 12;">
                    <items>
                        <!-- Generate panel -->
                        <VBox spacing="16"
                            style="
                                -fx-background-color: linear-gradient(to bottom, #1a1a2e, #16213e);
                                -fx-background-radius: 16; -fx-padding: 24;
                                -fx-effect: dropshadow(gaussian, rgba(124,131,253,0.2), 16, 0, 0, 5);
                            ">
                            <Label text="âœ¨ AI Study Guide" textFill="#7c83fd">
                                <font><Font name="System Bold" size="18.0"/></font>
                            </Label>
                            <Label text="Paste notes â†’ get a structured guide"
                                textFill="#64748b" style="-fx-font-size: 12px;"/>
                            <TextField fx:id="resTitle" promptText="Topic (e.g. Graph Theory)"
                                style="
                                    -fx-control-inner-background: #0f172a;
                                    -fx-text-fill: #e2e8f0; -fx-prompt-text-fill: #475569;
                                    -fx-background-radius: 10; -fx-border-color: rgba(124,131,253,0.3);
                                    -fx-border-radius: 10; -fx-padding: 10;
                                "/>
                            <TextArea fx:id="resInput"
                                promptText="Paste your raw notes or concepts here..."
                                wrapText="true" VBox.vgrow="ALWAYS"
                                style="
                                    -fx-control-inner-background: #0f172a;
                                    -fx-text-fill: #e2e8f0; -fx-prompt-text-fill: #475569;
                                    -fx-background-radius: 10; -fx-border-color: rgba(124,131,253,0.3);
                                    -fx-border-radius: 10; -fx-padding: 12;
                                "/>
                            <Button maxWidth="1.7976931348623157E308" onAction="#onGenerateResource"
                                text="âš¡ Generate &amp; Save"
                                style="
                                    -fx-background-color: linear-gradient(to right, #7c83fd, #56ccf2);
                                    -fx-text-fill: white; -fx-font-weight: bold;
                                    -fx-background-radius: 12; -fx-cursor: hand; -fx-font-size: 13px;
                                    -fx-effect: dropshadow(gaussian, rgba(124,131,253,0.5), 10, 0, 0, 4);
                                ">
                                <padding><Insets bottom="12.0" top="12.0"/></padding>
                            </Button>
                        </VBox>

                        <!-- Library panel -->
                        <VBox spacing="14"
                            style="-fx-background-color: white; -fx-background-radius: 16; -fx-padding: 22;
                                   -fx-border-color: #e8eeff; -fx-border-radius: 16;
                                   -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.06), 14, 0, 0, 4);
                            ">
                            <HBox alignment="CENTER_LEFT" spacing="10">
                                <Label text="ðŸ“–" style="-fx-font-size: 20px;"/>
                                <Label text="Personal Library" textFill="#1e293b">
                                    <font><Font name="System Bold" size="17.0"/></font>
                                </Label>
                                <Region HBox.hgrow="ALWAYS"/>
                                <Button onAction="#loadResources" text="ðŸ”„ Refresh"
                                    style="
                                        -fx-background-color: #f1f5f9;
                                        -fx-border-color: #e2e8f0; -fx-border-radius: 8;
                                        -fx-background-radius: 8; -fx-cursor: hand;
                                        -fx-padding: 6 12; -fx-font-size: 12px;
                                    "/>
                            </HBox>
                            <Separator style="-fx-opacity: 0.3;"/>
                            <ScrollPane fitToWidth="true"
                                style="-fx-background-color: transparent; -fx-border-color: transparent;"
                                VBox.vgrow="ALWAYS">
                                <content>
                                    <VBox fx:id="resourceList" spacing="10"
                                        style="-fx-background-color: transparent;"/>
                                </content>
                            </ScrollPane>
                        </VBox>
                    </items>
                </SplitPane>
            </Tab>

            <!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
                 TAB 4 â€” COMMUNITY
            â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
            <Tab text="ðŸŽ“ Community" style="-fx-font-weight: bold;">
                <SplitPane dividerPositions="0.24"
                    style="-fx-background-color: #f0f4ff; -fx-padding: 12;">
                    <items>
                        <!-- Tree panel -->
                        <VBox spacing="12"
                            style="
                                -fx-background-color: white; -fx-padding: 18;
                                -fx-background-radius: 16;
                                -fx-border-color: #e8eeff; -fx-border-radius: 16;
                                -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.06), 14, 0, 0, 4);
                            ">
                            <HBox alignment="CENTER_LEFT" spacing="8">
                                <Label text="ðŸ“‚ Explorer" textFill="#4f46e5">
                                    <font><Font name="System Bold" size="15.0"/></font>
                                </Label>
                                <Region HBox.hgrow="ALWAYS"/>
                                <Button text="ðŸ”„" onAction="#onRefreshCommunity"
                                    style="
                                        -fx-background-color: #eef2ff; -fx-cursor: hand;
                                        -fx-background-radius: 8; -fx-text-fill: #4f46e5;
                                        -fx-border-color: #c7d2fe; -fx-border-radius: 8; -fx-padding: 5 10;
                                    "/>
                            </HBox>
                            <TextField fx:id="communitySearchField"
                                promptText="ðŸ” Search course..."
                                style="
                                    -fx-background-radius: 20; -fx-padding: 8 16;
                                    -fx-border-color: #e2e8f0; -fx-border-radius: 20;
                                "/>
                            <TreeView fx:id="communityTree" VBox.vgrow="ALWAYS"
                                style="
                                    -fx-border-color: transparent;
                                    -fx-background-color: transparent;
                                    -fx-font-size: 13px;
                                "/>
                            <Button text="âž• Add Course / Folder"
                                onAction="#onAddNewFolder" maxWidth="1.7976931348623157E308"
                                style="
                                    -fx-background-color: linear-gradient(to right, #4f46e5, #7c83fd);
                                    -fx-text-fill: white; -fx-background-radius: 10;
                                    -fx-padding: 10; -fx-font-weight: bold; -fx-cursor: hand;
                                    -fx-effect: dropshadow(gaussian, rgba(79,70,229,0.4), 8, 0, 0, 3);
                                "/>
                        </VBox>

                        <!-- Resource table panel -->
                        <VBox spacing="14"
                            style="
                                -fx-background-color: white; -fx-padding: 22;
                                -fx-background-radius: 16;
                                -fx-border-color: #e8eeff; -fx-border-radius: 16;
                                -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.06), 14, 0, 0, 4);
                            ">
                            <HBox alignment="CENTER_LEFT" spacing="12">
                                <Label fx:id="currentFolderLabel" text="Select a folder..."
                                    textFill="#64748b">
                                    <font><Font name="System Bold" size="18.0"/></font>
                                </Label>
                                <Region HBox.hgrow="ALWAYS"/>
                                <TextField promptText="ðŸ” Search files..." prefWidth="220"
                                    style="-fx-background-radius: 20; -fx-padding: 7 16; -fx-border-color: #e2e8f0; -fx-border-radius: 20;"/>
                                <Button text="ðŸ“¤ Upload Resource"
                                    onAction="#onUploadResourceClick"
                                    style="
                                        -fx-background-color: linear-gradient(to right, #10b981, #06b6d4);
                                        -fx-text-fill: white; -fx-font-weight: bold;
                                        -fx-padding: 9 20; -fx-background-radius: 20;
                                        -fx-cursor: hand; -fx-font-size: 12px;
                                        -fx-effect: dropshadow(gaussian, rgba(16,185,129,0.4), 8, 0, 0, 3);
                                    "/>
                            </HBox>
                            <Separator style="-fx-opacity: 0.2;"/>
                            <TableView fx:id="resourceTable" VBox.vgrow="ALWAYS"
                                style="
                                    -fx-font-size: 13px;
                                    -fx-background-radius: 10;
                                    -fx-border-color: #e8eeff; -fx-border-radius: 10;
                                ">
                                <columns>
                                    <TableColumn fx:id="colResName"     text="Resource Name"  prefWidth="210"/>
                                    <TableColumn fx:id="colResType"     text="Type"           prefWidth="75"/>
                                    <TableColumn fx:id="colResDiff"     text="Level"          prefWidth="80"/>
                                    <TableColumn fx:id="colResUploader" text="Uploader"        prefWidth="110"/>
                                    <TableColumn fx:id="colResTags"     text="Tags"            prefWidth="130"/>
                                    <TableColumn fx:id="colResVotes"    text="Votes"           prefWidth="100"/>
                                    <TableColumn fx:id="colResAction"   text="Actions"         prefWidth="240"/>
                                </columns>
                            </TableView>
                        </VBox>
                    </items>
                </SplitPane>
            </Tab>

            <!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
                 TAB 5 â€” COLLABORATE
            â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
          <Tab text="ðŸ¤ Collaborate" style="-fx-font-weight: bold;">
    <SplitPane dividerPositions="0.22, 0.60"
        style="-fx-background-color: #0f1117; -fx-padding: 10;">
        <items>

            <!-- â”€â”€ Left Panel: Channels â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
            <VBox spacing="10"
                style="-fx-padding: 16;
                       -fx-background-color: #13151f;
                       -fx-background-radius: 14;
                       -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.4), 14, 0, 0, 4);">

                <Label text="CHANNELS" textFill="#6366f1"
                    style="-fx-font-weight: bold; -fx-font-size: 11px; -fx-letter-spacing: 1.5px;"/>

                <ScrollPane fitToWidth="true" VBox.vgrow="ALWAYS"
                    style="-fx-background: #13151f; -fx-background-color: #13151f; -fx-border-color: transparent;">
                    <VBox fx:id="channelList" spacing="4"
                        style="-fx-background-color: #13151f;"/>
                </ScrollPane>

                <!-- Admin only â€” shown/hidden via init() -->
                <Button fx:id="createChannelBtn"
                    text="âž• New Channel"
                    onAction="#onCreateChannel"
                    maxWidth="Infinity"
                    style="-fx-background-color: rgba(99,102,241,0.15);
                           -fx-text-fill: #818cf8;
                           -fx-cursor: hand;
                           -fx-font-weight: bold;
                           -fx-border-color: rgba(99,102,241,0.4);
                           -fx-border-radius: 8;
                           -fx-background-radius: 8;
                           -fx-padding: 9;
                           -fx-font-size: 13px;"/>
            </VBox>

            <!-- â”€â”€ Middle Panel: Teams â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
            <VBox spacing="12"
                style="-fx-padding: 16;
                       -fx-background-color: #0f1117;
                       -fx-background-radius: 14;
                       -fx-border-color: #1e2235;
                       -fx-border-radius: 14;">

                <!-- Channel info banner -->
                <VBox fx:id="channelInfoBox" spacing="5"
                    visible="false" managed="false"
                    style="-fx-background-color: rgba(99,102,241,0.1);
                           -fx-border-color: rgba(99,102,241,0.3);
                           -fx-border-radius: 10;
                           -fx-background-radius: 10;
                           -fx-padding: 14;">
                    <Label fx:id="channelTitleLabel" text="Channel"
                        style="-fx-font-size: 15px; -fx-font-weight: bold; -fx-text-fill: #818cf8;"/>
                    <Label fx:id="channelDescLabel" text="Description"
                        wrapText="true"
                        style="-fx-text-fill: #94a3b8; -fx-font-size: 13px;"/>
                </VBox>

                <!-- Header row -->
                <HBox alignment="CENTER_LEFT" spacing="10">
                    <Label text="ACTIVE TEAMS"
                        style="-fx-font-weight: bold; -fx-font-size: 12px;
                               -fx-letter-spacing: 1px; -fx-text-fill: #6366f1;"/>
                    <Region HBox.hgrow="ALWAYS"/>
                    <Button text="ðŸ“¢ Create Team" onAction="#onCreatePost"
                        style="-fx-background-color: linear-gradient(to right, #6366f1, #8b5cf6);
                               -fx-text-fill: white;
                               -fx-font-weight: bold;
                               -fx-padding: 8 16;
                               -fx-cursor: hand;
                               -fx-background-radius: 8;"/>
                </HBox>

                <!-- Team cards scroll -->
                <ScrollPane fitToWidth="true" VBox.vgrow="ALWAYS"
                    style="-fx-background-color: transparent; -fx-background: transparent; -fx-border-color: transparent;">
                    <VBox fx:id="teamList" spacing="12"
                        style="-fx-padding: 2;"/>
                </ScrollPane>
            </VBox>

            <!-- â”€â”€ Right Panel: Workspace â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
            <VBox fx:id="roomContainer" spacing="0"
                style="-fx-background-color: #0f1117;
                       -fx-background-radius: 14;
                       -fx-border-color: #1e2235;
                       -fx-border-radius: 14;
                       -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.35), 14, 0, 0, 4);">

                <!-- Placeholder (replaced dynamically) -->
                <VBox alignment="CENTER" VBox.vgrow="ALWAYS" spacing="12">
                    <Label text="ðŸ’¬ Team Workspace"
                        style="-fx-font-size: 20px; -fx-font-weight: bold; -fx-text-fill: #e2e8f0;"/>
                    <Label text="Select a team from the left to start collaborating."
                        style="-fx-text-fill: #475569; -fx-font-size: 14px;"/>
                </VBox>
            </VBox>

        </items>
    </SplitPane>
</Tab>



            <!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
                 TAB 6 â€” ECA TRACKER
            â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
            <Tab text="ðŸ† ECA" onSelectionChanged="#handleECATrackerSelect"
                style="-fx-font-weight: bold;">
                <VBox alignment="TOP_CENTER" spacing="20"
                    style="
                        -fx-padding: 28;
                        -fx-background-color: linear-gradient(to bottom right, #f0f4ff, #fff0f6);
                    ">
                    <HBox alignment="CENTER_RIGHT">
                        <Button text="ðŸ”„ Refresh Stats" onAction="#forceRefreshECA"
                            style="
                                -fx-background-color: white; -fx-border-color: #e2e8f0;
                                -fx-border-radius: 8; -fx-background-radius: 8;
                                -fx-cursor: hand; -fx-padding: 8 16; -fx-font-size: 12px;
                                -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.06), 6, 0, 0, 2);
                            "/>
                    </HBox>
                    <VBox fx:id="ecaContainer" alignment="CENTER" spacing="16" VBox.vgrow="ALWAYS"/>
                </VBox>
            </Tab>

            <!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
                 TAB 7 â€” SETTINGS
            â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
           <Tab text="âš™ï¸ Settings" style="-fx-font-weight: bold;">
    <fx:include source="profile_settings.fxml"/>
</Tab>

            <!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
                 TAB 8 â€” ADMIN PANEL
            â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
            <!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     FXML PATCH â€” dashboard.fxml  (Admin Tab content)
     
     Find your existing <Tab fx:id="adminTab"> in dashboard.fxml
     and replace its <content> with this structure.
     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->



<Tab fx:id="adminTab" text="ðŸ›¡ï¸ Admin">
    <content>
        <ScrollPane fitToWidth="true"
                    style="-fx-background-color: #f8fafc; -fx-background: #f8fafc;">
            <VBox spacing="20" style="-fx-padding: 28 40;">

                <!-- â•â• PAGE HEADER â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
                <VBox spacing="4">
                    <Label text="Admin Control Panel"
                           style="-fx-font-size: 22px; -fx-font-weight: bold; -fx-text-fill: #111827;"/>
                    <Label text="Manage platform settings, member requests, and social features."
                           style="-fx-font-size: 13px; -fx-text-fill: #6b7280;"/>
                    <Separator style="-fx-padding: 4 0 0 0;"/>
                </VBox>

                <!-- â•â• INNER SUB-TAB PANE â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
                <TabPane tabClosingPolicy="UNAVAILABLE"
                         style="-fx-tab-min-height: 38px; -fx-background-color: transparent;">

                    <!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
                         SUB-TAB 1 â”€â”€ General Controls (your original content)
                    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
                    <Tab text="âš™ï¸  General" closable="false">
                        <content>
                            <VBox spacing="20" style="-fx-padding: 20 0 0 0;">

                                <!-- Chat Controls -->
                                <VBox fx:id="adminControlsBox" spacing="12">
                                    <Label text="âš™ï¸  Chat Controls"
                                           style="-fx-font-size: 14px; -fx-font-weight: bold; -fx-text-fill: #374151;"/>
                                    <!-- Card injected by AdminChatToggleController -->
                                </VBox>

                                <Separator/>

                                <!-- Pending Member Requests -->
                                <VBox spacing="12">
                                    <HBox alignment="CENTER_LEFT" spacing="12">
                                        <Label text="ðŸ‘¥  Pending Member Requests"
                                               style="-fx-font-size: 14px; -fx-font-weight: bold; -fx-text-fill: #374151;"
                                               HBox.hgrow="ALWAYS" maxWidth="Infinity"/>
                                        <Button text="ðŸ”„ Refresh" onAction="#loadPendingRequests"
                                                style="-fx-background-color: #2563eb; -fx-text-fill: white;
                                                       -fx-font-weight: bold; -fx-background-radius: 8;
                                                       -fx-padding: 8 16; -fx-cursor: hand;"/>
                                    </HBox>
                                    <VBox fx:id="pendingListContainer" spacing="10">
                                        <Label text="Click Refresh to load pending requests."
                                               style="-fx-text-fill: #9ca3af; -fx-font-size: 13px;"/>
                                    </VBox>
                                </VBox>

                                <Separator/>

                                <!-- Broadcast Tools -->
                                <VBox spacing="12">
                                    <Label text="ðŸ“¢  Broadcast Tools"
                                           style="-fx-font-size: 14px; -fx-font-weight: bold; -fx-text-fill: #374151;"/>
                                    <HBox spacing="12">
                                        <Button text="ðŸ“… Broadcast Varsity Routine"
                                                onAction="#onBroadcastRoutine"
                                                style="-fx-background-color: #7c3aed; -fx-text-fill: white;
                                                       -fx-font-weight: bold; -fx-background-radius: 8;
                                                       -fx-padding: 10 20; -fx-cursor: hand; -fx-font-size: 13px;"/>
                                        <Button text="ðŸ“¢ Broadcast Official Notice"
                                                onAction="#onBroadcastNotice"
                                                style="-fx-background-color: #0891b2; -fx-text-fill: white;
                                                       -fx-font-weight: bold; -fx-background-radius: 8;
                                                       -fx-padding: 10 20; -fx-cursor: hand; -fx-font-size: 13px;"/>
                                    </HBox>
                                </VBox>

                            </VBox>
                        </content>
                    </Tab>

                    <!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
                         SUB-TAB 2 â”€â”€ Channel Merge System
                    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
                    <Tab text="ðŸ”—  Channel Merge" closable="false">
                        <content>
                            <ScrollPane fitToWidth="true"
                                        style="-fx-background-color: transparent; -fx-background: transparent;">
                                <VBox spacing="18" style="-fx-padding: 20 2 20 2;">

                                    <!-- Section header -->
                                    <VBox spacing="3">
                                        <Label text="Channel Merge Manager"
                                               style="-fx-font-size: 15px; -fx-font-weight: bold; -fx-text-fill: #111827;"/>
                                        <Label text="Enable merging, discover channels, handle requests and manage active hubs."
                                               style="-fx-font-size: 12px; -fx-text-fill: #6b7280;"/>
                                    </VBox>

                                    <!-- â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
                                         â•‘  CARD 1 â€” MERGE SETTINGS             â•‘
                                         â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
                                    <VBox spacing="14"
                                          style="-fx-background-color: white;
                                                 -fx-border-color: #e5e7eb;
                                                 -fx-border-radius: 12;
                                                 -fx-background-radius: 12;
                                                 -fx-padding: 18 20;">

                                        <HBox alignment="CENTER_LEFT" spacing="8">
                                            <Label text="ðŸ”§" style="-fx-font-size: 15px;"/>
                                            <Label text="Merge Settings"
                                                   style="-fx-font-size: 13px; -fx-font-weight: bold; -fx-text-fill: #1f2937;"/>
                                        </HBox>
                                        <Separator/>

                                        <CheckBox fx:id="allowMergeCheck"
                                                  text="Make my channel visible to other admins for merge requests"
                                                  style="-fx-font-size: 13px; -fx-text-fill: #374151;"/>

                                        <HBox alignment="CENTER_LEFT" spacing="12">
                                            <Label text="User Privacy in Merged Hub:"
                                                   style="-fx-font-size: 13px; -fx-text-fill: #374151; -fx-min-width: 195;"/>
                                            <ComboBox fx:id="privacyCombo" prefWidth="155"
                                                      style="-fx-font-size: 13px;"/>
                                            <Label text="PUBLIC = names shown  |  ANONYMOUS = identities hidden"
                                                   style="-fx-font-size: 11px; -fx-text-fill: #9ca3af;"/>
                                        </HBox>

                                        <HBox alignment="CENTER_LEFT" spacing="14">
                                            <Button text="ðŸ’¾ Save Settings" onAction="#onSaveSettings"
                                                    style="-fx-background-color: #2563eb; -fx-text-fill: white;
                                                           -fx-font-weight: bold; -fx-background-radius: 8;
                                                           -fx-padding: 8 20; -fx-cursor: hand; -fx-font-size: 13px;"/>
                                            <Label fx:id="settingsStatusLabel" text=""
                                                   style="-fx-font-size: 12px; -fx-text-fill: #6b7280;"/>
                                        </HBox>
                                    </VBox>

                                    <!-- â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
                                         â•‘  CARD 2 â€” DISCOVER & SEND REQUEST    â•‘
                                         â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
                                    <VBox spacing="14"
                                          style="-fx-background-color: white;
                                                 -fx-border-color: #e5e7eb;
                                                 -fx-border-radius: 12;
                                                 -fx-background-radius: 12;
                                                 -fx-padding: 18 20;">

                                        <HBox alignment="CENTER_LEFT" spacing="8">
                                            <Label text="ðŸ”" style="-fx-font-size: 15px;"/>
                                            <Label text="Discover Channels &amp; Send Request"
                                                   style="-fx-font-size: 13px; -fx-font-weight: bold; -fx-text-fill: #1f2937;"/>
                                        </HBox>
                                        <Separator/>

                                        <HBox alignment="CENTER_LEFT" spacing="16">
                                            <VBox spacing="5">
                                                <Label text="Merge Type"
                                                       style="-fx-font-size: 11px; -fx-text-fill: #6b7280;"/>
                                                <ComboBox fx:id="mergeTypeCombo" prefWidth="148"
                                                          style="-fx-font-size: 13px;"/>
                                            </VBox>
                                            <VBox spacing="5">
                                                <Label text="Duration (days)"
                                                       style="-fx-font-size: 11px; -fx-text-fill: #6b7280;"/>
                                                <TextField fx:id="durationField"
                                                           promptText="e.g. 7"
                                                           prefWidth="105"
                                                           style="-fx-font-size: 13px;
                                                                  -fx-background-radius: 7;
                                                                  -fx-border-color: #d1d5db;
                                                                  -fx-border-radius: 7;
                                                                  -fx-padding: 6 10;"/>
                                            </VBox>
                                            <VBox spacing="5">
                                                <Label text=" " style="-fx-font-size: 11px;"/>
                                                <Button text="ðŸ”„ Refresh List" onAction="#onLoadChannels"
                                                        style="-fx-background-color: #f3f4f6;
                                                               -fx-text-fill: #374151;
                                                               -fx-font-weight: bold;
                                                               -fx-background-radius: 7;
                                                               -fx-border-color: #d1d5db;
                                                               -fx-border-radius: 7;
                                                               -fx-padding: 7 14; -fx-cursor: hand;"/>
                                            </VBox>
                                        </HBox>

                                        <Label text="Channels currently open for merging:"
                                               style="-fx-font-size: 11px; -fx-text-fill: #6b7280;"/>
                                        <ListView fx:id="availableChannelsList"
                                                  prefHeight="120"
                                                  style="-fx-background-radius: 8;
                                                         -fx-border-color: #d1d5db;
                                                         -fx-border-radius: 8;
                                                         -fx-font-size: 13px;"/>

                                        <HBox alignment="CENTER_LEFT" spacing="12">
                                            <Button text="ðŸ“¨ Send Merge Request" onAction="#onSendRequest"
                                                    style="-fx-background-color: #059669; -fx-text-fill: white;
                                                           -fx-font-weight: bold; -fx-background-radius: 8;
                                                           -fx-padding: 8 20; -fx-cursor: hand; -fx-font-size: 13px;"/>
                                            <Label fx:id="discoverStatusLabel"
                                                   text="Select a channel above, then send a request."
                                                   style="-fx-font-size: 12px; -fx-text-fill: #9ca3af;"/>
                                        </HBox>
                                    </VBox>

                                    <!-- â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
                                         â•‘  CARD 3 â€” INCOMING MERGE REQUESTS    â•‘
                                         â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
                                    <VBox spacing="14"
                                          style="-fx-background-color: white;
                                                 -fx-border-color: #e5e7eb;
                                                 -fx-border-radius: 12;
                                                 -fx-background-radius: 12;
                                                 -fx-padding: 18 20;">

                                        <HBox alignment="CENTER_LEFT" spacing="8">
                                            <Label text="ðŸ“¬" style="-fx-font-size: 15px;"/>
                                            <Label text="Incoming Merge Requests"
                                                   style="-fx-font-size: 13px; -fx-font-weight: bold; -fx-text-fill: #1f2937;"/>
                                            <Region HBox.hgrow="ALWAYS"/>
                                            <Button text="ðŸ”„ Refresh" onAction="#onLoadRequests"
                                                    style="-fx-background-color: #f3f4f6;
                                                           -fx-text-fill: #374151;
                                                           -fx-font-weight: bold;
                                                           -fx-background-radius: 7;
                                                           -fx-border-color: #d1d5db;
                                                           -fx-border-radius: 7;
                                                           -fx-padding: 6 14; -fx-cursor: hand;"/>
                                        </HBox>
                                        <Separator/>

                                        <ListView fx:id="pendingRequestsList"
                                                  prefHeight="120"
                                                  style="-fx-background-radius: 8;
                                                         -fx-border-color: #d1d5db;
                                                         -fx-border-radius: 8;
                                                         -fx-font-size: 13px;"/>

                                        <HBox alignment="CENTER_LEFT" spacing="10">
                                            <Button text="âœ… Accept &amp; Set Hub Name" onAction="#onAcceptRequest"
                                                    style="-fx-background-color: #2563eb; -fx-text-fill: white;
                                                           -fx-font-weight: bold; -fx-background-radius: 8;
                                                           -fx-padding: 8 16; -fx-cursor: hand; -fx-font-size: 13px;"/>
                                            <Button text="âŒ Reject" onAction="#onRejectRequest"
                                                    style="-fx-background-color: #dc2626; -fx-text-fill: white;
                                                           -fx-font-weight: bold; -fx-background-radius: 8;
                                                           -fx-padding: 8 16; -fx-cursor: hand; -fx-font-size: 13px;"/>
                                            <Label fx:id="requestStatusLabel" text=""
                                                   style="-fx-font-size: 12px; -fx-text-fill: #6b7280;"/>
                                        </HBox>

                                        <Label text="â„¹ï¸  On Accept you will be asked to name the new hub. Both channel admins automatically become hub admins."
                                               style="-fx-font-size: 11px; -fx-text-fill: #9ca3af; -fx-wrap-text: true;"/>
                                    </VBox>

                                    <!-- â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
                                         â•‘  CARD 4 â€” ACTIVE MERGED HUBS         â•‘
                                         â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
                                    <VBox spacing="14"
                                          style="-fx-background-color: white;
                                                 -fx-border-color: #e5e7eb;
                                                 -fx-border-radius: 12;
                                                 -fx-background-radius: 12;
                                                 -fx-padding: 18 20;">

                                        <HBox alignment="CENTER_LEFT" spacing="8">
                                            <Label text="ðŸ”—" style="-fx-font-size: 15px;"/>
                                            <Label text="Active Merged Hubs"
                                                   style="-fx-font-size: 13px; -fx-font-weight: bold; -fx-text-fill: #1f2937;"/>
                                            <Region HBox.hgrow="ALWAYS"/>
                                            <Button text="ðŸ”„ Refresh" onAction="#onLoadActiveMerges"
                                                    style="-fx-background-color: #f3f4f6;
                                                           -fx-text-fill: #374151;
                                                           -fx-font-weight: bold;
                                                           -fx-background-radius: 7;
                                                           -fx-border-color: #d1d5db;
                                                           -fx-border-radius: 7;
                                                           -fx-padding: 6 14; -fx-cursor: hand;"/>
                                        </HBox>
                                        <Separator/>

                                        <Label text="Hubs your channel is currently part of (multi-merge supported):"
                                               style="-fx-font-size: 11px; -fx-text-fill: #6b7280;"/>

                                        <ListView fx:id="activeHubsList"
                                                  prefHeight="130"
                                                  style="-fx-background-radius: 8;
                                                         -fx-border-color: #d1d5db;
                                                         -fx-border-radius: 8;
                                                         -fx-font-size: 13px;"/>

                                        <HBox alignment="CENTER_LEFT" spacing="14">
                                            <Button text="ðŸšª Leave This Hub (Instant Unmerge)" onAction="#onInstantUnmerge"
                                                    style="-fx-background-color: #b45309; -fx-text-fill: white;
                                                           -fx-font-weight: bold; -fx-background-radius: 8;
                                                           -fx-padding: 8 18; -fx-cursor: hand; -fx-font-size: 13px;"/>
                                            <Label fx:id="hubStatusLabel" text=""
                                                   style="-fx-font-size: 12px; -fx-text-fill: #6b7280;"/>
                                        </HBox>

                                        <Label text="âš ï¸  Leaving removes ALL your users from the hub instantly. If only 1 channel remains the hub is auto-destroyed."
                                               style="-fx-font-size: 11px; -fx-text-fill: #9ca3af; -fx-wrap-text: true;"/>
                                    </VBox>

                                </VBox>
                            </ScrollPane>
                        </content>
                    </Tab>

                </TabPane>
                <!-- end inner sub-tab pane -->

            </VBox>
        </ScrollPane>
    </content>
</Tab>




            <!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
                 TAB 9 â€” AI QUESTION BANK
            â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
            <Tab fx:id="questionBankTab" text="âš¡ Question Bank" closable="false"
                style="-fx-font-weight: bold;">
                <content>
                    <AnchorPane style="-fx-background-color: white;"/>
                </content>
            </Tab>

            <!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
                 TAB 10 â€” SOCIAL ZONE
            â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
            <Tab text="ðŸŒŽ Social Zone" style="-fx-font-weight: bold;">
                <content>
                    <fx:include source="social_zone.fxml"/>
                </content>
            </Tab>

            <!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
                 TAB 11 â€” MENTORSHIP
            â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
            <Tab text="ðŸŽ“ Mentorship" style="-fx-font-weight: bold;">
                <content>
                    <fx:include source="consultancy_panel.fxml"/>
                </content>
            </Tab>

            <!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
                 TAB 12 â€” AI TUTOR
            â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
            <Tab text="ðŸ¤– AI Tutor" style="-fx-font-weight: bold;">
                <content>
                    <VBox spacing="14"
                        style="
                            -fx-padding: 18;
                            -fx-background-color: linear-gradient(to bottom, #f0f4ff, #fff);
                        ">
                        <WebView fx:id="aiWebView" VBox.vgrow="ALWAYS"
                            style="-fx-border-radius: 12;"/>
                        <HBox spacing="10" alignment="CENTER"
                            style="
                                -fx-background-color: white;
                                -fx-background-radius: 16; -fx-padding: 12 16;
                                -fx-border-color: #e8eeff; -fx-border-radius: 16;
                                -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.06), 10, 0, 0, 3);
                            ">
                            <TextField fx:id="aiTopicInput" promptText="Topic (e.g. Recursion)"
                                prefWidth="160"
                                style="
                                    -fx-padding: 10; -fx-background-radius: 10;
                                    -fx-border-color: #e2e8f0; -fx-border-radius: 10;
                                "/>
                            <TextField fx:id="aiQuestionInput"
                                promptText="Ask your question here..."
                                HBox.hgrow="ALWAYS"
                                style="
                                    -fx-padding: 10; -fx-background-radius: 10;
                                    -fx-border-color: #e2e8f0; -fx-border-radius: 10;
                                "/>
                            <Button fx:id="aiAskBtn" text="Ask AI âœ¨"
                                style="
                                    -fx-background-color: linear-gradient(to right, #7c83fd, #56ccf2);
                                    -fx-text-fill: white; -fx-font-weight: bold;
                                    -fx-background-radius: 12; -fx-padding: 10 24;
                                    -fx-cursor: hand; -fx-font-size: 13px;
                                    -fx-effect: dropshadow(gaussian, rgba(124,131,253,0.5), 10, 0, 0, 4);
                                "/>
                        </HBox>
                    </VBox>
                </content>
            </Tab>

            <!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
                 TAB 13 â€” LOGOUT
            â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
            <Tab onSelectionChanged="#handleLogoutTab"
                style="-fx-background-color: #fff1f2;">
                <graphic>
                    <Label text="ðŸšª Logout"
                        style="-fx-text-fill: #b91c1c; -fx-font-weight: bold;"/>
                </graphic>
                <content>
                    <VBox alignment="CENTER" spacing="22"
                        style="-fx-background-color: white;">
                        <Label text="Signing you out of ScholarGrid..."
                            style="-fx-font-size: 16px; -fx-text-fill: #64748b;"/>
                        <ProgressIndicator maxWidth="55" maxHeight="55"
                            style="-fx-progress-color: #ef4444;"/>
                    </VBox>
                </content>
            </Tab>
            


            <Tab text="ðŸ“– Study Room" style="-fx-font-weight: bold;">
    <content>
        <fx:include source="study_room.fxml"/>
    </content>
</Tab>

        </TabPane>
    </center>
</BorderPane>
